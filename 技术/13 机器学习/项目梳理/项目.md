# 项目
## star原则
1. 项目：参与智能营销平台RPM决策引擎的流量分配方案设计
支付弹窗是金服各业务触达用户的主要渠道，弹窗流量分配初期是采取优先级+配额制的方式，由于这种方式存在各种弊端（用户价值存在业务差异性，按优先级分配不能实现全局价值最优；用户需求不能和业务完全匹配，低优业务无法触达大量高潜用户；各业务配额会最大程度用完，导致尾部流量曝光对用户体验造成伤害），平台提出建立基于RPM（千次曝光收入）的流量分配方案，提升流量价值和用户体验，同时保障各业务转化人数。
在计算用户在各业务下的价值时各业务模型预测目标的口径与LTV计算口径不一致，因此需要对模型预测转化率进行修正，本人采取分箱校准的方法对各业务客群进行校准，使得各业务模型预测的ltv和和实际ltv的误差控制在20%以内，相比数据组同学做的周期性离线修正因子的方法，曝光更加稳定，rpm也有所提升（约10元）
平台需要根据订单的rpm是否高于阈值进行下发决策，已有的曝光控制pacing组件是按照流量比例设置曝光计划，根据曝光是否达到预期对当前时刻的下发阈值进行动态调整。由于各业务对阈值的敏感度不一样导致有的业务曝光曲线会剧烈抖动，且这种算法没有考虑不同业务在不同时间段的转化率的不同，不利于挑选优质流量。为此本人基于smartpacing论文的思想设计了一种分层准入的方案，具体是先离线统计探测数据的每个时间片的每个预测rpm区间的真实转化数据并作为流量分布配置信息，依据该分布制定曝光计划。同时对曝光容易抖动的业务单独设置一个pacing去控制其曝光。最终满足业务提出的曝光稳定的诉求且优化了平台的rpm（约16元）

2. 项目：生活费未授信用户促授信和首借
支付弹窗渠道是生活费未授信用户促授信的主要渠道和促首借的重要渠道，当前采用的lightGBM二分类模型以是否借款为label，无法学习到用户从曝光、点击、申请、授信环节的转化信息。为提升首借规模，本人采用LTR算法训练排序模型，其中每个query包含若干条到达曝光、点击、申请、授信、借款环节的记录，线上效果提升明显，到端借款率提升10%+
为进一步提升授信规模，本人利用弹窗渠道的曝光申请数据训练的wide&deep模型，wide部分采用预训练lightGBM模型的叶子节点的值，deep部分连续变量离散化、离散变量采用onehot或embedding，离线auc提升到0.912（lightGBM是0.904），到端申请率提升5%+
未授信用户首借的主要来源是固定入口，因此促进该类用户的首借用户数增长主要是通过固定入口营销模型能力的介入。固定入口主要抓手有两个：气泡分发和营销额度。本人参与固定入口千人千面（气泡分发）能力的建设，训练的气泡模型到端申请率提升20%，T+0到端首借率提升15%；固定入口营销额度模型（分发0.5w～20w的营销额度）到端申请率提升13%，T+0到端首借率提升17%

3. 项目：生活费存量用户在成本控制下促首借
弹窗渠道存量成本控制模型：通过差异化发放免息券的方式无法进一步促动弹窗渠道存量用户的借款，因此业务期望在保证转化不降的前提下降低成本。本人针对探测样本训练一个lgb模型，利用该模型预测样本中每个用户在各种权益下的转化率，然后k-means聚类并统计每个簇在各种权益下的转化人数，问题抽象为一个分组背包问题（MCKP，平均成本约束&曝光约束），求解得到每个簇的发放策略。最后通过差异化权益投放做到首借持平，获客成本下降35%；
首页发券模型：首页发券是指无券存量用户进入首页时弹窗发放权益，运营期望模型在满足一定的roi约束下差异化发券（9种）提升首借用户数。本人利用已经训练好的lgb模型对样本中每个用户在9种权益下分别打分获得9维向量，然后聚类并统计每个簇中的9种券的转化量，通过求解在roi约束下最大化转化率uplift获得每个簇对应的发放策略。线上效果提升明显，T+0日均增量首借人数1364人(70%流量)，日均增量首借金额650万，日均增量在贷余额752万；
挽留弹窗模型：运营期望通过模型分发权益对离开首页的访问客户进行精准挽留或召回以提升首借。券的种类包括免息券、一键领、不弹窗共8种，本人采用lgb模型，特征包括存量用户特征，券的点击、申请、借款特征，用户和券的点击等交互行为特征，最终存量用户挽留弹窗模型的转化率相比对照组提升9%。

4. 项目：生活费弹窗渠道的流量分配
在弹窗渠道流量配额制时期，生活费内部合理的流量分配可以有助于提升借款规模，本人利用此前设计的流量控制pacing组件，在未授信和存量客群之间进行流量分配。在满足曝光约束和授信约束下最大化首借；
约束优化的离线求解过程包含3步：1）统计探测样本中各客群模型的各时间片下不同预测概率区间（分组）的曝光绝对量和转化绝对量等指标；2）先通过满足生活费新客授信的约束可以得到线上需要曝光的时间片分组；3）根据步骤1的配置能够得出生活费新客曝光绝对量，从而可以得出生活费存量多个模型对应的曝光绝对量，然后将每个活动的时间片分组作为物品，通过离线求解背包问题的形式得到存量多个模型的曝光量以及转化绝对量，同时得到各模型应该曝光的时间片分组；
最终存量曝光增加13.5%下首借规模提升20%；新客曝光减少10%下授信用户数降幅5%，首借持平；整体首借规模提升8%。

## wiki
瑛琪个人空间：
https://km.sankuai.com/page/364935251
https://km.sankuai.com/page/144330680
https://km.sankuai.com/page/119956901
技术平台：


## 数据掌握



## Q & A
### rpm
0. 专利提案 JF2000352-P
1. 评估指标：RPM、负反馈率、业务转化人数。
2. 年度目标：流量价值：RPM提升20%以上；用户体验：用户负反馈率降低10%；业务转化：高优业务转化量下降低于5%，低优业务转化量提升20%
3. 相关数据：
     整体rpm: 362 vs 326
     负反馈率: 0.40% vs 0.35%
     高优：生活费：授信人数提升12%，首贷人数提升11%；生意贷：授信人数提升49%，首贷人数提升44%；导流：授信人数下降27%，首贷人数下降31%；高优业务：授信人数提升14%，首贷人数下降6%；低优业务：转化人数提升35%
     低优业务：联名卡：发卡量提升10%；互助：分摊人数提升10%
     财务LTV数据：？
     6月扩量至90%，流量1200w

4. 数据-系统-算法-产品
5. 行业内是怎么做的有了解吗？
6. 联名卡&生活费流量置换：部分生活费授信客户低首贷、低转化
7. 认知迭代：实验建设（实验设计思路；数据建设思路）；策略打造（基于客户价值的流量分发基本思路。GOOGLE、抖音/快手也存在按照RPM进行流量分发；蚂蚁按二跳率分发同时有配额保障；支付后弹窗流量分发方案：保障用户体验 ->  流量渠道核心定位为获客 -> 通过预估客户价值（RPM）进行业务之间的流量分发
RPM策略】：基于预测RPM（预测千次曝光收益，即预测转化率*LTV*1000）排序结果的流量分配机制

【优先级策略】： 基于优先级+下发配额的流量分配机制

优先级：美团支付>鲸湾>美团互助，其中鲸湾内部：

18-22岁买单白名单用户：买单>生活费/生意贷/联名卡，其中：

山东/广西地区：联名卡>生活费/生意贷

非山东/广西地区：生活费/生意贷>联名卡

非18-22岁买单白名单用户：生活费/生意贷/联名卡>买单，其中：

山东/广西地区：联名卡>生活费/生意贷

非山东/广西地区：生活费/生意贷>联名卡


### 生活费新客
涉及的算法
  uplift: 
  l2r
  pulearning进行负样本构建采样，
  


## 风控业务层面
- 特征有哪些，目标值如何定义，样本量（正负），哪些特征比较重要，如何部署模型，EDA会涉及哪些工作，缺失值如何处理，异常点如何处理？分箱？
- 有哪些模型融合的经验？模型监控怎么做？
- A，B卡，C卡，F卡的特征和target；
- 三方数据源如何评估和使用；


## kaggle
1. 熟悉python里的numpy,pandas和matplotlib三大神器，做前期的数据分析和预处理，包括特征工程部分2. 熟悉sklearn，里面有不少机器学习的东西3. 熟悉Keras，tensorflow等深度学习框架，有时候dl效果更好4. 看之前比赛冠军的分享，或者看一些好的kernels5. 划分好训练集和验证集6. 了解调参trick7. 整个过程无非就是理解题意，做好数据分析，数据预处理，然后最重点是搞好特征工程，然后xgboost,lightgbm,gbdt,fm,dl等等算法跑加调参，最后bagging和stacking集成
